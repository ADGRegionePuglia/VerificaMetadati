<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>Verifica Medatati PDF</title>
    <script type="module"> import pdfjsDist from 'https://cdn.jsdelivr.net/npm/pdfjs-dist@5.2.133/+esm' </script>
    <script src="https://unpkg.com/pdf-lib@1.17.1"></script>
    <script src="https://unpkg.com/downloadjs@1.4.7"></script>
    <link rel="icon" type="image/svg+xml" href="public/pdf-file.svg" />
    <script src='./script.js' defer></script>
    <link type="text/css" href="style.css" rel="stylesheet">

    <svg style="display:none" aria-hidden="true" id="svgdefs" version="2" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <symbol id="check" viewBox="0 0 512 512">
                <title>Check</title>
                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
            </symbol>
            <symbol id="xmark" viewBox="0 0 512 512">
                <title>Xmark</title>
                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"/>
            </symbol>
            <symbol id="s_pdf" viewBox="0 0 512 512">
                <title>PDF</title>
                <path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 144-208 0c-35.3 0-64 28.7-64 64l0 144-48 0c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z"/>
            </symbol>
            <symbol id="warning" viewBox="0 0 512 512">
                <title>Warning</title>
                <path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
            </symbol>
        </defs>
    </svg>
</head>
<body>

    

    <div class="main-container">
        <div class="container">
            <div class="riga-top">
                <h1>VERIFICA METADATI PDF</h1>
            </div>
            <div class="riga-top border-top">
                <span style="text-align: center;">
                    <p>Le linee guida fornite dal RTD prevedono che tutte le note (interne ed in uscita) e relativi allegati siano protocollate in formato <b>PDF/A</b> e contengano i metadati <b>AUTORE</b>, <b>TITOLO</b> ed <b>OGGETTO</b>.</p>
                    <p>Questo strumento verifica che i PDF rispettino le linee guida ed inoltre rende possibile la modifica diretta dei metadati e la conversione in formato PDF/A.</p>
              </span>
            </div>
            <div class="riga-top border border-fix" style="margin-bottom: 30px;text-align: center;">
                <h3>SCEGLI FILE PDF</h3>
                <input id="fileUploader" type="file" accept=".pdf" autocomplete="off" style="margin-left: 15px;">
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="container-l">
            <div class="riga">
                <div class="colonna-testo no-border-right">
                    <h4>CAMPO</h4>
                </div>
                <div class="colonna-input no-border-right">
                    <h4>VALORE</h4>
                </div>
                <div class="colonna-icona">
                    <h4>VERIFICA</h4>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo no-border-right">
                    <h5>Titolo*:</h5>
                </div>
                <div class="colonna-input no-border-right">
                    <textarea name="titolo" id="titolo" autocomplete="off" disabled></textarea>
                </div>
                <div class="colonna-icona">
                    <svg><use id="check-titolo" /></svg>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo no-border-right">
                    <h5>Oggetto*:</h5>
                </div>
                <div class="colonna-input no-border-right">
                    <textarea name="oggetto" id="oggetto" autocomplete="off" disabled></textarea>
                </div>
                <div class="colonna-icona">
                    <svg><use id="check-oggetto" /></svg>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo no-border-right">
                  <h5 style="margin-bottom:0px">Tag:</h5>
                  <h6 style="margin-top: 0px">(Facoltativi)</h6>
                </div>
                <div class="colonna-input no-border-right">
                    <textarea name="tags" id="tags" autocomplete="off" disabled></textarea>
                </div>
                <div class="colonna-icona">
                    <svg><use id="check-tags" /></svg>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo no-border-right">
                    <h5>Autore*:</h5>
                </div>
                <div class="colonna-input no-border-right">
                    <textarea name="autore" id="autore" autocomplete="off" disabled></textarea>
                </div>
                <div class="colonna-icona">
                    <svg><use id="check-autore" /></svg>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo no-border-right">
                    <h5>PDF/A*:</h5>
                </div>
                <div class="colonna-input no-border-right">
                    <p id="pdfa"></p>
                </div>
                <div class="colonna-icona">
                    <svg><use id="check-pdfa" /></svg>
                </div>
            </div>
            <div class="riga">
                <div class="colonna-testo  no-border-right border-fix">
                    <h5>Firme:</h5>
                </div>
                <div class="colonna-input  no-border-right border-fix">
                    <p id="firme"></p>
                </div>
                <div class="colonna-icona border-fix">
                    <svg><use id="check-firme" /></svg>
                </div>
            </div>

            <div id="errori" class="div-error" >
                <svg id="error_icon" style="display:none"><use href="#warning" style="fill:#dc3220" /></svg>
                <p id="titolo_warn" style="display:none; margin:0px">Titolo assente</p>
                <p id="oggetto_warn" style="display:none; margin:0px">Oggetto assente</p>
                <p id="autore_warn" style="display:none; margin:0px">Autore assente</p>
            </div>
            <div id="warns" class="div-error" style="margin-top:0px">
                <svg id="warn_icon" style="display:none"><use href="#warning" style="fill:#ffcc00" /></svg>
                <p id="pdfa_warn" style="display:none; margin:0px" flag="false">Il file non Ã¨ nel formato PDF/A</p>
                <p id="font_warn" style="display:none; margin:0px" flag="false">Trovati font non inclusi nel PDF, questi font verrano sostituiti durante la conversione</p>
                <p id="firme_warn" style="display:none; margin:0px" flag="false">Le firme digitali verranno rimosse</p>
            </div>

            <div class="riga">
                <div class="colonna-btn">
                    <button id="btn-save" class="btn-save" style="display:none"><h4>SCARICA PDF MODIFICATO</h4></button>
                </div>
            </div>

        </div>
        <div class="container-r">
            <div class="container-preview border border-fix no-border-top">
                <div id="preview_title" class="colonna-preview border-fix">
                    <h4>ANTEPRIMA DOCUMENTO</h4>
                </div>
                <div id="div_icona_pdf" class="container-icon">
                    <img src="/public/pdf-file.svg" style="max-width: 96px;" alt="Icona PDF">
                </div>
                <div id="canvas-div" style="display: none;">
                    <canvas id="the-canvas"></canvas>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
